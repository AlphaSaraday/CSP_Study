# **CSP**

#### 202104-4 校门外的树

不妨设数字$n$不包含自己在内的约数个数为$f_i$，例如数字 6 的约数有 3 个：$1,2,3$。显然，区间$[a_i,a_{i+1}]$（区间内没有障碍物）构成的种树方案数量恰好为$f_{a_{i+1}-a_i}$（想一想为什么？【因为约数等价于等差数列的公差】）。

不妨令$dp[i]$表示前$i$个障碍物构成的种树方案数量，我们可以利用一个动态规划算法求解$dp[i]$。边界条件为$dp[1]=1$。对于第$i$个障碍物，利用一个`set`记录遍历过的所有约数，按$i-1$到$1$的顺序枚举$j$，令$x=a_i-a_j$，遍历 x 的所有约数，将没有出现在`set`中的约数数量记录下来，假设为$t$，那么这$t$个约数都可以作为$[a_j,a_i]$之间等差数列的公差，也就是说可以构成$t$个等差数列，那么可以令$dp[i]+=t\cdot dp[j]$。最后$dp[n]$即为答案。

对于约数，可以用埃氏筛法提前预处理出$[1,m]$以内所有数字的约数，其中$m>=max(a_i)$，时间复杂度为$O(mloglogm)$。所以总的时间复杂度为$O(mloglogm)+O(n^2logm)$。

#### 202012-2 期末预测之最佳阈值

**将这 m 位同学的$y_i$和挂科情况$result_i(result_i\in \{0,1\})$存储到一个`map<gg, array<gg, 2>> r`中，其中键表示$y_i$，值表示对应挂科情况的同学数量**。遍历`map`，统计出$\theta$恰好为$y_i$时的预测正确的次数，求出最大的即可。

这里的关键在于如何求出$\theta$恰好为$y_i$时的预测正确的次数。我们可以定义变量`p0`表示＜$y_i$且$result_i==1$的同学个数；定义变量`p1`表示≥$y_i$且$result_i==0$的同学个数，那么$\theta$恰好为$y_i$时的预测正确的次数就是$m-p0-p1$，而`p0`、`p1`可以在遍历过程中进行累加或累减。
